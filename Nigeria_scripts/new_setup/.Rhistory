Variable <- "ITN"
subVariable <-"HH"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# cluster locations
NGAshpfiles  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
LGAshp <- readOGR("data/Nigeria_LGAs_shapefile_191016", layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
View(key_list)
key_list[[1]] <- Null
key_list[[1]] <- NULL
View(key_list)
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls <- lapply(itn.ls, subset, hv103 == "1")
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
View(itn.ls)
######
look_for(itn.ls[[7]], "hml12" )
######
look_for(itn.ls[[6]], "hml12" )
######
look_for(itn.ls[[5]], "hml12" )
######
look_for(itn.ls[[4]], "hml12" )
######
look_for(itn.ls[[3]], "hml12" )
######
look_for(itn.ls[[2]], "hml12" )
######
look_for(itn.ls[[1]], "hml12" )
######
look_for(itn.ls[[1]], "itn" )
View(itn.ls)
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"HH"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
itn.ls <- map2(itn.ls, key_list, left_join)
}
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
itn.ls <- map2(itn.ls, key_list, left_join)
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
View(NGA_ID)
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- map(cbind, key_list, v001 = NGA_ID)
itn.ls <- map2(itn.ls, key_list, left_join)
}
key_list <- map(cbind, key_list, v001 = NGA_ID)
key_list <- map(NGAshplist, over.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
key_list <- map(NGAshplist, over.fu
key_list <- map(NGAshplist, over.fun)
key_list <- map(NGAshplist, over.fun)
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
key_list[[1]]$v001
View(NGA_ID)
NGAshplist[[1]]$DHSCLUST
itn.ls <- map2(itn.ls, key_list, left_join)
Variable <- "ITN"
subVariable <-"U5"
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
itn.ls <- map2(itn.ls, key_list, left_join)
}
if (subVariable == "HH"){
itn.ls <- itn.ls
}else if (subVariable == "U5"){
itn.ls <-lapply(itn.ls, subset, hv105 <= 5)
}else if (subVariable == "6-9"){
itn.ls <-lapply(itn.ls, subset, hv105 > 5 & hv105 < 10)
}else if (subVariable == "10-18"){
itn.ls <-lapply(itn.ls, subset, hv105 > 9 & hv105 < 19)
}else {
itn.ls <-lapply(itn.ls, subset, hv105 > 18)
}
## -----------------------------------------
### Directories
## -----------------------------------------
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"U5"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
itn.ls <- map2(itn.ls, key_list, left_join)
}
if (subVariable == "HH"){
itn.ls <- itn.ls
}else if (subVariable == "U5"){
itn.ls <-lapply(itn.ls, subset, hv105 <= 5)
}else if (subVariable == "6-9"){
itn.ls <-lapply(itn.ls, subset, hv105 > 5 & hv105 < 10)
}else if (subVariable == "10-18"){
itn.ls <-lapply(itn.ls, subset, hv105 > 9 & hv105 < 19)
}else {
itn.ls <-lapply(itn.ls, subset, hv105 > 18)
}
## -----------------------------------------
### Directories
## -----------------------------------------
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"U5"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
recode_itn <- function(data) {
data %>% mutate(hh_itn = ifelse(hml12 == "9", NA,ifelse(hml12 ==1 | hml12 ==2, 1, 0)))
}
recode_itn <- function(data) {
data %>% mutate(hh_itn = ifelse(hml12 == 9, NA,ifelse(hml12 ==1 | hml12 ==2, 1, 0)))
}
## -----------------------------------------
### Directories
## -----------------------------------------
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"U5"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
itn.ls <- map2(itn.ls, key_list, left_join)
}
if (subVariable == "HH"){
itn.ls <- itn.ls
}else if (subVariable == "U5"){
itn.ls <-lapply(itn.ls, subset, hv105 <= 5)
}else if (subVariable == "6-9"){
itn.ls <-lapply(itn.ls, subset, hv105 > 5 & hv105 < 10)
}else if (subVariable == "10-18"){
itn.ls <-lapply(itn.ls, subset, hv105 > 9 & hv105 < 19)
}else {
itn.ls <-lapply(itn.ls, subset, hv105 > 18)
}
View(recode_itn)
recode_itn <- function(data) {
data %>% mutate(hh_itn = ifelse(hml12 == 9, NA,ifelse(hml12 ==1 | hml12 ==2, 1, 0)))
}
## -----------------------------------------
### Directories
## -----------------------------------------
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"U5"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
View(recode_itn)
## -----------------------------------------
### Directories
## -----------------------------------------
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
## -----------------------------------------
### Variable
## -----------------------------------------
Variable <- "ITN"
subVariable <-"U5"
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
## -----------------------------------------
### Other files
## -----------------------------------------
# LGA shape file
LGAshp <- readOGR(file.path(DataDir,"Nigeria_LGAs_shapefile_191016"), layer ="NGA_LGAs", use_iconv=TRUE, encoding= "UTF-8")
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
key_list <- map(NGAshplist, over.fun)
# rep DS filr
rep_DS <- read.csv(file.path(BinDir, "rep_DS/representative_DS_orig60clusters.csv")) %>% dplyr::select(-X)
if (Variable == "ITN"){
itn.ls <-read.files( ".*NGPR.*\\.DTA", DataDir, read_dta)
itn.ls[[1]] <- NULL
itn.ls <- lapply(itn.ls, subset, hv103 == 1)
itn.ls <- map(itn.ls, recode_itn)
itn.ls <- map(itn.ls, survey.month.fun)
key_list[[1]] <- NULL
NGAshplist[[1]]<- NULL
NGA_ID <-list(NGAshplist[[1]]$DHSCLUST, NGAshplist[[2]]$DHSCLUST,NGAshplist[[3]]$DHSCLUST,NGAshplist[[4]]$DHSCLUST,NGAshplist[[5]]$DHSCLUST,NGAshplist[[6]]$DHSCLUST)
key_list <- Map(cbind, key_list, v001 = NGA_ID)
itn.ls <- map2(itn.ls, key_list, left_join)
}
if (subVariable == "HH"){
itn.ls <- itn.ls
}else if (subVariable == "U5"){
itn.ls <-lapply(itn.ls, subset, hv105 <= 5)
}else if (subVariable == "6-9"){
itn.ls <-lapply(itn.ls, subset, hv105 > 5 & hv105 < 10)
}else if (subVariable == "10-18"){
itn.ls <-lapply(itn.ls, subset, hv105 > 9 & hv105 < 19)
}else {
itn.ls <-lapply(itn.ls, subset, hv105 > 18)
}
table(itn.ls[[1]]$hv105)
user <- Sys.getenv("USERNAME")
if ("mambrose" %in% user) {
user_path <- file.path("C:/Users", user)
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
} else {
Drive <- file.path(gsub("[\\]", "/", gsub("Documents", "", Sys.getenv("HOME"))))
NuDir <- file.path(Drive, "Box/NU-malaria-team")
NGDir <-file.path(NuDir, "data/nigeria_dhs/data_analysis")
DataDir <-file.path(NGDir, "data")
ResultDir <-file.path(NGDir, "results")
SrcDir <- file.path(NGDir, "src")
BinDir <- file.path(NGDir, "bin")
}
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
## -----------------------------------------
### Required custom functions and settings
## -----------------------------------------
source(file.path(SrcDir, "Nigeria functions.R"))
# cluster locations
NGAshplist  <-read.files("*FL.*\\.shp$", DataDir, shapefile)
NGA_ID <- lapply(NGAshplist, "[[", "DHSCLUST")
View(NGA_ID)
